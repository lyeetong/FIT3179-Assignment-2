{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "background": "black",
  "description": "A simple radial chart with embedded data.",
  "data": {
    "url": "https://raw.githubusercontent.com/lyeetong/FIT3179-Assignment-2/main/deaths_by_factors_categories.csv"
  },
  "width": "container",
  "height": 400,
  "params": [
    {
      "name": "FactorCategory_selection",
      "bind": {
        "input": "select",
        "options": [null, "Physical Practices", "Diet Practices"],
        "labels": ["Show All", "Physical Practices", "Diet Practices"],
        "name": "Factor Category Selection: "
      }
    }
  ],
  "transform": [
    {
      "filter": "FactorCategory_selection == null || datum['Factor Category'] == FactorCategory_selection"
    },
    {"calculate": "datum['Death Count']/1325548.002620273", "as": "percentage"}
  ],
  "layer": [
    {"mark": {"type": "arc", "innerRadius": 20}},
    {
      "mark": {"type": "text", "radiusOffset": -18, "fill": "black", "fontSize":16},
      "encoding": {
        "text": {"field": "percentage", "type": "quantitative", "format": ".2f"}
      }
    }
  ],
  "encoding": {
    "theta": {"field": "Death Count", "type": "quantitative", "stack": true},
    "radius": {
      "field": "Death Count",
      "scale": {"type": "sqrt", "zero": true, "rangeMin": 100}
    },
    "color": {
      "field": "Factor Category",
      "type": "nominal",
      "scale": {"scheme": "pastel1"},
      "legend": {"title": "Factors", "orient": "none", "padding": 50, "titleColor": "white", "labelColor": "white", "labelFontSize": 12, "direction": "horizontal", "titleAnchor": "middle", "titleFontWeight":"bold", "titleFontSize": 13, "legendX": 80, "legendY": 360}
    },
    "order": {"field": "Death Count", "type": "quantitative"},
    "tooltip": [
      {"field": "Factor", "type": "nominal"},
      {"field": "Death Count", "type": "quantitative", "format": ".2f"}
    ],
    "opacity": {"value": 1},
    "strokeOpacity": {"value": 0.5},
    "strokeWidth": {"value": 1.5},
    "stroke": {"value": "white"}
  },
  "config": {"view": {"stroke": "transparent"}}
}
